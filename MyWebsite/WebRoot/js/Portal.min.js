if(typeof Portal=="undefined"){Portal={};Portal.getCookieFlag=function(b){if(b>=32){alert("å‚æ•°é”™è¯¯");return}var a=Fai.Cookie.get("_portalFlag");if(a==null){a=0}else{a=parseInt(a)}return((a&(1<<b))!=0)?true:false};Portal.setCookieFlag=function(d,a){if(d>=32){alert("å‚æ•°é”™è¯¯");return}var b=Fai.Cookie.get("_portalFlag");if(b==null){b=0}else{b=parseInt(b)}if(a){b|=(1<<d)}else{b&=~(1<<d)}var e=30*12*5;var c=new Date();c.setTime(c.getTime()+e*24*60*60*1000);Fai.Cookie.set("_portalFlag",b,c)};Portal.logClick=function(c,b){var a="cmd=click&app="+c;if(typeof b!="undefined"){a+="&value="+b}$.ajax({type:"post",url:"/ajax/log_h.jsp",data:a,error:function(){},success:function(){}})};Portal.renderUEditor=function(b){var a={ueditorId:null,setPageChange:null,initContent:null,minFrameHeight:0,faiscoRichTip:null,isPasteImage:true,withPage:null};$.extend(a,b);var c=new baidu.editor.ui.Editor({upLoadFlashUrl:"/ajax/upfile_h.jsp?type=50",upLoadImageUrl:"/ajax/upimg_h.jsp",upSitePasteIamgeUrl:"/ajax/uppasteimg_h.jsp",ueditorChangeEvent:a.setPageChange,htmlModuleRichTip:a.faiscoRichTip,initComplete:a.initComplete,initialContent:a.initContent,minFrameHeight:a.minFrameHeight,ueditorEncapsulationEvent:a.ueditorEncapsulationEvent,upImgApp:a.upImgApp,isPasteImage:a.isPasteImage,toolbars:[["shrinkopenup","removeformat","|","bold","italic","underline","|","fontfamily","fontsize","forecolor","backcolor","|","insertorderedlist","insertunorderedlist","lineheight","justifyright","|","link","unlink","qqservice","image",a.flash,"inserttable",a.withPage,"|","source","||","pasteplain","|","selectall","undo","redo","|","strikethrough","superscript","subscript","horizontal","zhspace","|","indent","rowspacingtop","rowspacingbottom","|","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","|","fullscreen",]],openJumpCtrl:false});if(a.ueditorId){c.render(a.ueditorId)}return c};Portal.logout=function(a){if(confirm("ç¡®å®šè¦é€€å‡ºç³»ç»Ÿå—ï¼?")){$.ajax({type:"post",url:"/ajax/login_h.jsp?cmd=logout",error:function(){alert("æœåŠ¡ç¹å¿™ï¼Œè¯·ç¨åé‡è¯•ã€?")},success:function(b){var b=jQuery.parseJSON(b);if(b.success){if(a){top.location.href=a}else{top.location.href="/"}}else{alert(b.msg)}}})}};Portal.g_initOpenApp=false;Portal.openApp=function(b,a,c,d){if(Portal.g_initOpenApp){Fai.removeAllIng();Portal.initApp(b,a,c,d)}};Portal.initApp=function(l,f,n,s){var d=l;var e=f;var q=n;var p=s;if(!Portal.g_initOpenApp){var o=window.location.hash;var g=Fai.decodeUrl(o.replace("#app=",""));var c=g.split("?");var k=c[0];var j=c[1];var r=k.split(".");var m=r[0];var h=r[1];if(m){d=m}if(h){e=h}if(j){p=j}}var i=false;var a=false;$.each(Portal.mappingApp,function(u,v){var t=v.app;if(t==d){if(typeof e==="undefined"||e==null){e=v.btn;i=true}if(typeof q==="undefined"||q==null){q=v.url}a=true;return false}});if(!a){var b=Portal.mappingApp[0];d=b.app;q=b.url;e=b.btn}if(typeof q!="undefined"&&q!=""&&typeof p!="undefined"){if(q.indexOf("?")!=-1){q=q+"&"+p+"&_R="+Math.random()}else{q=q+"?"+p+"&_R="+Math.random()}}if(d){if(q){$("#mainFrame").attr("src",q)}if(Portal.g_initOpenApp){if(d==e||i){window.location.hash="#app="+Fai.encodeUrl(d+(typeof p!="undefined"?"?"+p:""))}else{window.location.hash="#app="+Fai.encodeUrl(d+"."+e+(typeof p!="undefined"?"?"+p:""))}if(d=="mailBox"){Portal.logDog(100096,1)}Portal.g_initOpenApp=false;$("#"+e).click();Portal.g_initOpenApp=true}else{$("#"+e).click()}}Portal.g_initOpenApp=true};Portal.mappingApp=[]}Portal.g_initOpenApp2=false;Portal.openApp2=function(a){if(Portal.g_initOpenApp2){Fai.removeAllIng();Portal.initApp2(a)}};Portal.initApp2=function(l){var k=l.openAppId;var c=l.buttonId;var d=l.newURL;var e=l.iframeParams;var b=l.newParams;if(!Portal.g_initOpenApp2){var i=$.hash("appId");var j=$.hash("appButtonId");var a=$.hash("iParams");if(i){k=i}if(j){c=j}if(a){e=a}}var h=false;var f=false;$.each(Portal.mappingApp,function(n,o){var m=o.app;if(m==k){if(typeof c==="undefined"||c==null){c=o.btn;h=true}if(typeof d==="undefined"||d==null){d=o.url}f=true;return false}});if(!f){var g=Portal.mappingApp[0];k=g.app;d=g.url;c=g.btn}if(typeof d!="undefined"&&d!=""&&typeof e!="undefined"){if(d.indexOf("?")!=-1){d=d+"&"+Fai.decodeUrl(e)+"&_R="+Math.random()}else{d=d+"?"+Fai.decodeUrl(e)+"&_R="+Math.random()}}if(k){if(d){$("#mainFrame").attr("src",d)}if(Portal.g_initOpenApp2){if(k==c||h){window.location.hash="#appId="+k+(typeof b!="undefined"?"&"+b:"")+(typeof e!="undefined"?"&iParams="+Fai.encodeUrl(e):"")}else{window.location.hash="#appId="+k+"&appButtonId="+c+(typeof b!="undefined"?"&"+b:"")+(typeof e!="undefined"?"&iParams="+Fai.encodeUrl(e):"")}Portal.g_initOpenApp2=false;$("#"+c).click();Portal.g_initOpenApp2=true}else{$("#"+c).click()}}Portal.g_initOpenApp2=true};